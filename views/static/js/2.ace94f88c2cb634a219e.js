webpackJsonp([2],{"/1Mk":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("Dd8w"),s=n.n(o),r=n("Cz8s"),i=n("mzkE"),a=n("Q5rI"),l={name:"chat",data:function(){return{socket:null,member_list:[],msg:""}},props:{name:"",roomid:""},mounted:function(){var t=this;Object(a.getJS)(["https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"]).then(function(){t.start()}).catch(function(t){return console.log(t)})},methods:{start:function(){var t=this,e=io("http://192.168.0.60:8000");this.socket=e,e.on("open",function(n){console.log("ws open"),e.emit("join",{name:t.name,roomid:t.roomid})}),e.on("join",function(e){console.log("join"),console.log(e),-1===t.member_list.indexOf(e.name)&&t.member_list.push(e.name)}),e.on("leave",function(e){console.log("leave"),console.log(e);var n=t.member_list.indexOf(e.name);-1!==n&&t.member_list.splice(n,1)}),e.on("roominfo",function(e){console.log("roominfo"),console.log(e),t.member_list=e.users}),e.on("msg",function(t){console.log("msg"),console.log(t);var e="<div>"+t.name+": "+t.msg+"</div>";document.getElementById("msglog").innerHTML+=e})},sendMsg:function(){this.socket.send(this.msg),this.msg=""}},destroyed:function(){}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"roominfo"},[t._v("\n\t\t房间："+t._s(t.roomid)+"\n\t\t在线人数："+t._s(t.member_list.length)+"\n\t\t在线人员："+t._s(t.member_list)+"\n\t")]),t._v(" "),n("div",{attrs:{id:"msglog"}}),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],attrs:{id:"msg",placeholder:"请输入你要发的信息"},domProps:{value:t.msg},on:{input:function(e){e.target.composing||(t.msg=e.target.value)}}}),t._v(" "),n("button",{attrs:{type:"button"},on:{click:t.sendMsg}},[t._v("发送")])])},staticRenderFns:[]};var u=n("VU/8")(l,c,!1,function(t){n("5ZHY")},"data-v-0555232a",null).exports,m=n("NYxO"),d={components:{Header:r.a,Footer:i.a,Chat:u},data:function(){return{roomid:""}},computed:s()({},Object(m.b)(["user"])),created:function(){},methods:{}},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Header"),this._v(" "),e("Chat",{ref:"chat",attrs:{name:this.user.uid,roomid:"test"}}),this._v(" "),e("Footer")],1)},staticRenderFns:[]},v=n("VU/8")(d,f,!1,null,null,null);e.default=v.exports},"1kS7":function(t,e){e.f=Object.getOwnPropertySymbols},"5ZHY":function(t,e){},Cz8s:function(t,e,n){"use strict";var o=n("Dd8w"),s=n.n(o),r=n("NYxO"),i={name:"head",data:function(){return{}},computed:s()({},Object(r.b)(["user","login"])),created:function(){},methods:{layout:function(){var t=this;console.log("layout"),this.$axios.get("/user/layout",null,function(e){0===e.result?(t.$store.commit("removeUser"),alert("登出成功！"),t.$router.go(0)):alert(e.searon)})},show:function(t){console.log(t.currentTarget);var e=document.querySelectorAll(".user_link")[0];null===e.getAttribute("show")?e.setAttribute("show","true"):e.removeAttribute("show","true")}}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"header"},[t._m(0),t._v(" "),n("div",{staticClass:"menu"},[t._m(1),t._v(" "),n("dl",[n("router-link",{attrs:{to:{path:"chat"}}},[t._v("房间")])],1)]),t._v(" "),n("div",{staticClass:"userinfo"},[t.login?n("div",[n("a",{staticClass:"user_link",attrs:{href:"javascript:;"},on:{click:t.show}},[n("img",{attrs:{src:"static/image/dota.jpg"}}),t._v(" "),n("span",[t._v(t._s(t.user.account))])]),t._v(" "),n("div",{staticClass:"user_menu"},[n("dl",[n("router-link",{attrs:{to:{path:"/"}}},[t._v("个人主页")])],1),t._v(" "),n("dl",[n("a",{attrs:{href:"javascript:;"},on:{click:t.layout}},[t._v("退出")])])])]):n("div",{staticClass:"before_login"},[n("router-link",{attrs:{to:{path:"login"}}},[t._v("登录")]),t._v("\n\t\t\tor\n\t\t\t"),n("router-link",{attrs:{to:{path:"register"}}},[t._v("注册")])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo"},[e("img",{attrs:{src:"static/image/dota.jpg",alt:"logo"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("dl",[e("a",{attrs:{href:"/"}},[this._v("首页")])])}]};var l=n("VU/8")(i,a,!1,function(t){n("XGT8")},"data-v-12c1520b",null);e.a=l.exports},Dd8w:function(t,e,n){"use strict";e.__esModule=!0;var o,s=n("woOf"),r=(o=s)&&o.__esModule?o:{default:o};e.default=r.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}},NpIQ:function(t,e){e.f={}.propertyIsEnumerable},R4wc:function(t,e,n){var o=n("kM2E");o(o.S+o.F,"Object",{assign:n("To3L")})},To3L:function(t,e,n){"use strict";var o=n("lktj"),s=n("1kS7"),r=n("NpIQ"),i=n("sB3e"),a=n("MU5D"),l=Object.assign;t.exports=!l||n("S82l")(function(){var t={},e={},n=Symbol(),o="abcdefghijklmnopqrst";return t[n]=7,o.split("").forEach(function(t){e[t]=t}),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=o})?function(t,e){for(var n=i(t),l=arguments.length,c=1,u=s.f,m=r.f;l>c;)for(var d,f=a(arguments[c++]),v=u?o(f).concat(u(f)):o(f),g=v.length,_=0;g>_;)m.call(f,d=v[_++])&&(n[d]=f[d]);return n}:l},V3tA:function(t,e,n){n("R4wc"),t.exports=n("FeBl").Object.assign},XGT8:function(t,e){},mzkE:function(t,e,n){"use strict";var o={render:function(){var t=this.$createElement;return(this._self._c||t)("footer",{staticClass:"copy"},[this._v("\n\tCopy © Fungleo\n")])},staticRenderFns:[]},s=n("VU/8")(null,o,!1,null,null,null);e.a=s.exports},woOf:function(t,e,n){t.exports={default:n("V3tA"),__esModule:!0}}});